# 2025年我居然比梁文锋更懂DeepSeek？Agent+ETF轮动策略回测结论炸裂...

**作者**: BreadFree 项目主理人
**首发**: 知乎

---

## 当 DeepSeek 遇到量化

前两天看到新闻，梁文锋旗下的幻方量化基金公司在 2025 年取得了 **56.6%** 的惊人收益。圈内都在惊呼“量化天王归来”。

作为一名不想当厨子的程序员不是好量化交易员，我不禁看了一眼自己刚跑完的回测结果。
看着屏幕上 **BreadFree** 智能体策略（Agent Strategy）跑出的 **2025年 72.86%** 的收益率，我陷入了沉思。

难道说，我比梁总更懂 DeepSeek？（手动狗头），不要骂我标题党，请听我娓娓道来

当然，回测不是实盘，但我这次做的尝试，或许真的摸到了量化交易未来的脉搏——**从“参数拟合”走向“逻辑推理”**。

还记得上一期文章里，我还在为 ETF 轮动策略的“超参数过拟合”问题抓耳挠腮吗？Lookback 设置 20 天还是 30 天？持有 1 只还是 2 只？这些死板的规则，在变幻莫测的市场面前，往往是刻舟求剑。

这一期，我扔掉了死板的 `if-else`，引入了 **DeepSeek** 加持的 **双智能体（Dual-Agent）架构**，让 AI 自己去分析、去风控、去操盘。结果，真的有点炸裂。

---

## 核心要点：把“死策略”变成“活专家”

传统的 ETF 轮动是这样的：
> 机器：计算过去 20 天涨幅前三的 ETF -> 买入 -> 持有 10 天 -> 卖出。

不管大盘是牛是熊，不管不仅涨了而且波动巨大，它都照做不误。

而我在 `breadfree/strategies/effi_agent_strategy.py` 里实现的 **Agent 策略** 是这样的：

### 1. 引入“人类直觉”的量化指标：Efficiency
首先，我不再单纯看“涨幅”，而是计算一个 **Efficiency（效率）指标**。
简单理解就是：**涨得快（Momentum 高）且 涨得稳（R2 拟合度高，波动率低）**。
这就像选长跑运动员，主要看谁跑得快且姿势稳，而不是谁是百米博尔特但跑两步就摔跤。

### 2. 双智能体架构（The Dual-Agent System）

DeepSeek构建智能体不再呆板的选择指标最高的3支，而是能够根据动态市场行情，选择持仓一支还是两支，甚至包括持仓比例。当市场整体较差最高的效率都为负时，还能智能选择空仓规避风险。

我设计了两个 AI 角色，模拟专业基金的投决会：

*   **🕵️‍♂️ 角色 A：高级量化分析师 (Senior Quantitative Analyst)**
    *   **职能**：负责进攻。
    *   **输入**：当前持仓表现 + 市场 Top 3 潜力股的详细技术面（收益率、波动率、趋势稳定性）。
    *   **Prompt 核心**：Analysis。不仅仅是看数字，而是结合 DeepSeek 的逻辑推理能力，判断当前是该“激进追涨”、“防守持有”还是“空仓观望”。它不再受限于“必须买满 2 只”，如果市场不好，它可以建议 0 仓位。
    
*   **👮‍♂️ 角色 B：风控官 (Risk Manager)**
    *   **职能**：负责刹车。
    *   **输入**：分析师的建仓建议 + 账户资金状况。
    *   **Prompt 核心**：Safety。它会审查分析师的逻辑。如果分析师因为贪婪想满仓一只波动率极大的妖股，风控官会说：“No，这把风险太大，只给你 30% 仓位”，甚至直接否决，也会考虑到持仓成本。

### 3. 动态博弈与 Rebalance （开发中，可能是下期，可能...）
传统的轮动是定期的（比如每 20 天换一次）。我计划在 新增数据分析师Agent 中引入了 **Trigger（触发器）** 机制， 进一步减少：
*   如果手里的票趋势坏了（Efficiency 连续 3 天转负），**立刻触发风控检查**，不用等调仓日。
*   如果外面有比手里好得多的机会（Efficiency 翻倍），**立刻触发换仓机会**。

---

## 回测实战：2021-2025 穿越牛熊

我拉取了过去 5 年的日线数据（与上期同样标的）进行全样本回测。对比对象是传统的 Grid Search 在长周期21-25找到的最优参数策略（Lookback=20, Top=2）。传统轮动也是我自己实现的，也不一定是ETF轮动的最佳实践，但我至少保证了对比的两种方法从相同数据源、相同技术指标下的决策。

| 年份 | 传统轮动(Baseline) | **Agent 轮动** | 点评 |
| :--- | :--- | :--- | :--- |
| 2021 | **+28.61%** | +20.46% | 略逊一筹 |
| 2022 | -19.54% | **-11.16%** | **空仓避险能力碾压** |
| 2023 | -6.37% | **+2.92%** | 减少震荡磨损 |
| 2024 | +8.07% | **+13.42%** | 趋势跟随更稳健 |
| **2025** | +52.12% | **+72.86%** | **牛市爆发力拉满** |

*(注：以上数据基于 BreadFree 框架回测，非实盘建议，传统轮动：breadfree/strategies/effi_rotation_strategy.py， Agent 轮动：breadfree/strategies/effi_agent_strategy.py)*

2025是个大牛市，也是 DeepSeek 大放异彩的一年。
*   **传统轮动**：收益不错，但往往在回调时因为死板的持有期而回撤。
*   **Agent 策略**：**收益 72.86%**。
    *   **原因分析**：AI 精准地识别到了几波主升浪（Efficiency 极高），并且在趋势转弱的早期，风控官 Agent 及时建议减仓。最骚的是，在市场风格切换模糊不清时，AI 选择了空仓观望，躲过了几次“假突破”。

如果不看 2025 这波大牛市，前几年的表现更能说明问题。
*   **2022 年（熊市）**：传统策略因为“由于必须持有 Top N”，在普跌行情里依然硬着头皮买“跌得少”的票，结果还是亏。**Agent 策略** 在大部分时间选择了 **极低仓位或空仓**，回撤控制堪称完美。
*   **2023-2024（震荡市）**：Agent 展现出了类似人类的“盘感”。它不再频繁止损，而是在趋势确立（R2 高）时才入场，减少了大量震荡磨损。

---

## 结语：Code is Cheap, Logic is Gold.

梁文锋的成功我无法复制（毕竟人家有几千张卡），但 DeepSeek 给普通开发者打开了一扇门。

通过 BreadFree 项目，我发现：**大模型最大的价值，不是帮你写代码，而是帮你做决策。**
将 LLM 作为一个“理性的大脑”嵌入到交易的每一个环节（选股、择时、风控），可能会是量化交易散户弯道超车的唯一机会。可能聪明的人已经发现了一个你这不是就把调超参数，换成了更玄学的调提示词了吗？这的确是个让我抓狂的问题，但处在智能体改造世界的时代，我愿为技术的发展铺路，给大家提供一个全新的思路，我作出的Agent编排、提示词优化也肯定不是LLM的上限。后续，我想把BreadFree框架做成任何人可参与进来，根据自己理解编排不同职责智能体、调整自己认为更有效的提示词，让我们一起拥抱“Agent”的进化吧。
👏 欢迎订阅关注我的知乎专栏，我会持续更新 BreadFree 项目的进展和更多有趣的量化交易策略。

想看看代码是怎么写的？想自己跑跑看能不能复现 72%（LLM生成具有一定随机性，无法完全复现，我多次复测了25年结果分布在65%～75%之间，策略脚本：breadfree/strategies/effi_agent_strategy_hold20d.py）？
欢迎来我的 GitHub 踩一踩，顺便点个 Star 🌟。

👉 **项目地址**: [https://github.com/FeiCoder/BreadFree-Simu](https://github.com/FeiCoder/BreadFree-Simu)

---
*风险提示：本文回测数据仅供技术交流，不构成任何投资建议。市场有风险，入市需谨慎。*
